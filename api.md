# Документация API

## Общая информация

- **Базовый URL**: `</api>`
- **Формат данных**: JSON
- **Аутентификация**: Для всех запросов, кроме регистрации и авторизации, необходимо использовать заголовок `Authorization` с токеном вида:

```
Authorization: Basic Y 
```

---

## Эндпоинты

### 1. Регистрация пользователя

- **URL**: `/register`
- **Метод**: `POST`
- **Описание**: Регистрирует нового пользователя и возвращает токен для авторизации.
- **Пример запроса**:

```json
{
  "username": "user123",
  "password": "pass123",
  "role": "USER_ROLE"
}
```

- **Ответ (успех)**:

Код: `200 OK`

```json
"Basic YWRtaW46cGFzc3dvcmQxMjM="
```

### 2. Авторизация пользователя

- **URL**: `/login`
- **Метод**: `POST`
- **Описание**: Аутентифицирует пользователя и возвращает токен.
- **Пример запроса**:

```json
{
  "username": "user123",
  "password": "pass123"
}
```

- **Ответ (успех)**:

Код: `200 OK`

```json
"Basic YWRtaW46cGFzc3dvcmQxMjM="
```



---

### 3. Получение всех категорий

- **URL**: `/categories`
- **Метод**: `GET`
- **Описание**: Возвращает список всех категорий.
- **Требуется аутентификация**: Да
- **Ответ (успех)**:

Код: `200 OK`

```json
[
  {
    "id": 1,
    "name": "string",         // Название категории
    "imageUrl": "string"      // Ссылка на изображение категории
  }
]
```

---

### 4. Получение героев по категории

- **URL**: `/heroes`
- **Метод**: `GET`
- **Описание**: Возвращает список героев, относящихся к указанной категории.
- **Требуется аутентификация**: Да
- **Параметры запроса**:

| Параметр   | Тип    | Обязательный | Описание           |
| ---------- | ------ | ------------ | ------------------ |
| `category` | string | Да           | Название категории |

- **Пример запроса**:

```
GET /heroes?category=Warriors
```

- **Ответ (успех)**:

Код: `200 OK`

```json
[
  {
    "id": 1,
    "name": "string",         // Имя героя
    "imageUrl": "string",     // Ссылка на изображение героя
    "categoryId": 1            // ID категории
  }
]
```

---

### 5. Получение всех видео

- **URL**: `/videos`

- **Метод**: `GET`

- **Описание**: Возвращает список всех видео.

- **Требуется аутентификация**: Да

- **Ответ (успех)**:

Код: `200 OK`

```json
[
  {
    "id": 1,
    "name": "string",         // Название видео
    "imageUrl": "string",     // Ссылка на изображение видео
    "heroId": 1                // ID героя
  }
]
```

---

### 6. Получение видео по герою

- **URL**: `/videos/hero`
- **Метод**: `GET`
- **Описание**: Возвращает список видео, относящихся к указанному герою.
- **Требуется аутентификация**: Да
- **Параметры запроса**:

| Параметр | Тип    | Обязательный | Описание  |
| -------- | ------ | ------------ | --------- |
| `hero`   | string | Да           | Имя героя |

- **Пример запроса**:

```
GET /videos/hero?hero=JohnDoe
```

- **Ответ (успех)**:

Код: `200 OK`

```json
[
  {
    "id": 1,
    "name": "string",         // Название видео
    "imageUrl": "string",     // Ссылка на изображение видео
    "heroId": 1                // ID героя
  }
]
```

---

### 7. Удаление видео (только админ)

- **URL**: `/videos/{id}`

- **Метод**: `DELETE`

- **Описание**: Удаляет видео по указанному идентификатору.

- **Требуется аутентификация**: Да

- **Права доступа**: Только администратор

- **Ответ (успех)**:

Код: `200 OK`

```
"Video deleted successfully."
```

---

### 8. Получение видео по ID

- **URL**: `/videos/{id}`

- **Метод**: `GET`

- **Описание**: Возвращает информацию о видео по его идентификатору.

- **Требуется аутентификация**: Да

- **Ответ (успех)**:

Код: `200 OK`

```json
{
  "id": 1,
  "name": "string",           // Название видео
  "imageUrl": "string",       // Ссылка на изображение видео
  "heroId": 1                  // ID героя
}
```



---

### 9. Получение HLS потока видео

- **URL**: `/videos/stream/{videoId}`

- **Метод**: `GET`

- **Описание**: Возвращает ссылку на HLS-поток видео.

- **Требуется аутентификация**: Да

- **Ответ (успех)**:

Код: `200 OK`

```
<ссылка на HLS-поток>
```

---

### 10. Получение файлов видео

- **URL**: `/videos/{videoId}/{filename}`

- **Метод**: `GET`

- **Описание**: Возвращает файл видео или его часть (например, плейлист `.m3u8` или сегмент `.ts`).

- **Ответ (успех)**:

Код: `200 OK`

- **Пример заголовка ответа**:

```
Content-Type: application/x-mpegURL // для .m3u8
Content-Type: video/MP2T            // для .ts
```



---

## Примечания

- Все поля в JSON строго типизированы. Ошибки в формате приведут к коду `400 Bad Request`.



